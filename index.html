<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Calculator</title>
    <style>
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: #222;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 900px;
            margin: 30px auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(0,0,0,0.10);
            padding: 24px 40px 40px 40px;
        }
        header {
            text-align: center;
            margin-bottom: 24px;
        }
        h1 {
            font-size: 2.5rem;
            color: #103d7c;
            margin-bottom: 0.2em;
        }
        .tabs { display: flex; border-bottom: 2px solid #eee; margin-bottom: 20px;}
        .tab {
            padding: 10px 24px;
            cursor: pointer;
            font-weight: bold;
            color: #333;
            border-radius: 10px 10px 0 0;
        }
        .tab.active {
            background: #1a2a6c;
            color: #fff;
        }
        .calculator-card {
            background: #f6f7fb;
            border-radius: 10px;
            box-shadow: 0 0 6px #e0e1e5;
            margin-bottom: 28px;
            padding: 24px;
        }
        .input-group {
            margin-bottom: 12px;
        }
        label {
            display: block;
            font-weight: 500;
            margin-bottom: 5px;
        }
        input, select {
            width: 100%;
            padding: 6px 8px;
            font-size: 1rem;
            border: 1px solid #bbb;
            border-radius: 6px;
            margin-bottom: 4px;
        }
        button {
            padding: 10px 24px;
            background: #1a2a6c;
            color: #fff;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 8px 0 0 0;
        }
        button:hover { background: #b21f1f; }
        .result {
            margin: 16px 0 0 0;
            background: #e2e8f0;
            border-radius: 6px;
            padding: 10px 16px;
        }
        .result-value {
            color: #b21f1f;
            font-weight: bold;
        }
        .formula {
            background: #f3f4f6;
            border-radius: 6px;
            padding: 9px 12px;
            margin-top: 10px;
            font-size: 0.98em;
        }
        .formula-title { font-weight: bold; margin-bottom: 4px;}
        .abg-result-item { margin-bottom: 4px;}
        footer {
            margin-top: 40px;
            text-align: center;
            color: #888;
            font-size: 0.95rem;
        }
        @media (max-width:600px){
            .container {padding: 8px;}
            .calculator-card {padding: 12px;}
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>Medical Calculator</h1>
        <p>Quick, accurate calculations for healthcare professionals.</p>
    </header>
    <div class="tabs">
        <div class="tab active" onclick="showTab('calculators')">Calculators</div>
        <div class="tab" onclick="showTab('formulas')">Formulas</div>
        <div class="tab" onclick="showTab('references')">References</div>
    </div>
    <div id="calculators-content">
        <!-- Fluid Calculation -->
        <div class="calculator-card">
            <h2>üíß Fluid Calculation</h2>
            <div class="input-group">
                <label for="weight">Patient Weight (kg):</label>
                <input type="number" id="weight" placeholder="e.g. 70">
            </div>
            <div class="input-group">
                <label for="age">Patient Age (years):</label>
                <input type="number" id="age" placeholder="e.g. 5">
            </div>
            <button onclick="calculateFluid()">Calculate Fluid Needs</button>
            <div id="fluid-result" class="result" style="display: none;">
                <h3>Fluid Requirements (per 24 hours)</h3>
                <p>Maintenance Fluid: <span id="maintenance-fluid" class="result-value">0 mL/day</span></p>
                <p>Replacement Fluid: <span id="replacement-fluid" class="result-value">0 mL/day</span></p>
                <p>Total Fluid: <span id="total-fluid" class="result-value">0 mL/day</span></p>
            </div>
            <div class="formula">
                <div class="formula-title">Formulas:</div>
                <div>Children (4-2-1 Rule):</div>
                <div>‚ÄÉFirst 10 kg: 4 mL/kg/hr</div>
                <div>‚ÄÉNext 10 kg: 2 mL/kg/hr</div>
                <div>‚ÄÉRest: 1 mL/kg/hr</div>
                <div>Maintenance (per 24h) = [Sum above] √ó 24</div>
                <div>Adults: 30 mL/kg/day</div>
            </div>
        </div>

        <!-- Drop Factor Calculation -->
        <div class="calculator-card">
            <h2>‚è±Ô∏è Drop Factor Calculation</h2>
            <div class="input-group">
                <label for="volume">Volume (mL):</label>
                <input type="number" id="volume" placeholder="e.g. 500">
            </div>
            <div class="input-group">
                <label for="time">Time (minutes):</label>
                <input type="number" id="time" placeholder="e.g. 120">
            </div>
            <div class="input-group">
                <label for="drop-factor">Drop Factor:</label>
                <select id="drop-factor">
                    <option value="10">10 gtt/mL (Blood Set)</option>
                    <option value="15">15 gtt/mL (Standard Set)</option>
                    <option value="20">20 gtt/mL (Microdrip)</option>
                    <option value="60">60 gtt/mL (Microdrip)</option>
                </select>
            </div>
            <button onclick="calculateDrops()">Calculate Drops per Minute</button>
            <div id="drops-result" class="result" style="display: none;">
                <h3>Drip Rate</h3>
                <p>Drops per Minute: <span id="drops-per-minute" class="result-value">0 gtt/min</span></p>
            </div>
            <div class="formula">
                <div class="formula-title">Formula:</div>
                <div>Drops/min = (Volume √ó Drop Factor) / Time (min)</div>
            </div>
        </div>

        <!-- ABG Analysis -->
        <div class="calculator-card">
            <h2>ü´Å ABG Analysis</h2>
            <div class="input-group">
                <label for="ph">pH:</label>
                <input type="number" id="ph" step="0.01" placeholder="e.g. 7.34">
            </div>
            <div class="input-group">
                <label for="pco2">pCO‚ÇÇ (mmHg):</label>
                <input type="number" id="pco2" step="0.1" placeholder="e.g. 40">
            </div>
            <div class="input-group">
                <label for="hco3">HCO‚ÇÉ‚Åª (mmol/L):</label>
                <input type="number" id="hco3" step="0.1" placeholder="e.g. 24">
            </div>
            <button onclick="analyzeABG()">Analyze ABG</button>
            <div id="abg-result" class="result" style="display: none;">
                <div class="abg-result-item"><strong>Primary Disorder:</strong> <span id="primary-disorder"></span></div>
                <div class="abg-result-item"><strong>Compensation:</strong> <span id="compensation"></span></div>
                <div class="abg-result-item"><strong>Correction:</strong> <span id="correction"></span></div>
            </div>
            <div class="formula">
                <div class="formula-title">Reference Ranges:</div>
                <div>pH: 7.35-7.45 | pCO‚ÇÇ: 35-45 mmHg | HCO‚ÇÉ‚Åª: 22-26 mmol/L</div>
                <div>Acidosis: pH &lt; 7.35 | Alkalosis: pH &gt; 7.45</div>
                <div>Respiratory: pCO‚ÇÇ changes | Metabolic: HCO‚ÇÉ‚Åª changes</div>
            </div>
        </div>

        <!-- Infusion Calculation -->
        <div class="calculator-card">
            <h2>üíâ Infusion Calculation</h2>
            <div class="input-group">
                <label for="inf-dose">Dose (mcg/kg/min):</label>
                <input type="number" id="inf-dose" placeholder="e.g. 5">
            </div>
            <div class="input-group">
                <label for="pat-weight">Patient Weight (kg):</label>
                <input type="number" id="pat-weight" placeholder="e.g. 70">
            </div>
            <div class="input-group">
                <label for="drug-amount">Drug Amount (mg in bag):</label>
                <input type="number" id="drug-amount" placeholder="e.g. 250">
            </div>
            <div class="input-group">
                <label for="bag-volume">Total Volume (mL in bag):</label>
                <input type="number" id="bag-volume" placeholder="e.g. 250">
            </div>
            <button onclick="calculateInfusion()">Calculate Infusion Rate</button>
            <div id="infusion-result" class="result" style="display:none;">
                <h3>Infusion Parameters</h3>
                <p>Concentration: <span id="inf-conc" class="result-value"></span> mcg/mL</p>
                <p>Infusion Rate: <span id="inf-rate" class="result-value"></span> mL/hr</p>
            </div>
            <div class="formula">
                <div class="formula-title">Formulas:</div>
                <div>Concentration (mcg/mL) = [Drug Amount (mg) √ó 1000] / Volume (mL)</div>
                <div>Infusion Rate (mL/hr) = [Dose √ó Weight √ó 60] / Concentration</div>
            </div>
        </div>

        <!-- Drug Calculation -->
        <div class="calculator-card">
            <h2>üíä Drug Dose Calculation</h2>
            <div class="input-group">
                <label for="prescribed-dose">Prescribed Dose:</label>
                <input type="number" id="prescribed-dose" placeholder="e.g. 500">
                <select id="prescribed-unit">
                    <option value="mg">mg</option>
                    <option value="mcg">mcg</option>
                    <option value="g">g</option>
                </select>
            </div>
            <div class="input-group">
                <label for="available-dose">Available Dose:</label>
                <input type="number" id="available-dose" placeholder="e.g. 250">
                <select id="available-unit">
                    <option value="mg">mg</option>
                    <option value="mcg">mcg</option>
                    <option value="g">g</option>
                </select>
            </div>
            <div class="input-group">
                <label for="quantity">Volume/Qty Available (mL or tab):</label>
                <input type="number" id="quantity" placeholder="e.g. 2">
            </div>
            <button onclick="calculateDrug()">Calculate Drug Amount</button>
            <div id="drug-result" class="result" style="display: none;">
                <h3>Drug Calculation</h3>
                <p>Amount to Administer: <span id="amount" class="result-value">0</span> units</p>
                <p>Volume: <span id="volume-result" class="result-value">0</span> mL/tab</p>
            </div>
            <div class="formula">
                <div class="formula-title">Formula:</div>
                <div>Amount = (Prescribed Dose / Available Dose) √ó Quantity</div>
            </div>
        </div>
    </div>

    <div id="formulas-content" style="display: none;">
        <div class="calculator-card">
            <h2>üìã Medical Formulas</h2>
            <div class="formula">
                <div class="formula-title">Fluid Requirements</div>
                <div>Children (4-2-1 Rule):</div>
                <div>‚ÄÉFirst 10 kg: 4 mL/kg/hr</div>
                <div>‚ÄÉNext 10 kg: 2 mL/kg/hr</div>
                <div>‚ÄÉRest: 1 mL/kg/hr</div>
                <div>‚ÄÉTotal per 24h = [Sum above] √ó 24</div>
                <div>Adults: 30 mL/kg/day</div>
            </div>
            <div class="formula">
                <div class="formula-title">Drip Rate</div>
                <div>Drops per min = (Volume √ó Drop Factor) / Time</div>
            </div>
            <div class="formula">
                <div class="formula-title">Infusion Rate (mcg/kg/min dosing)</div>
                <div>Conc. (mcg/mL) = Drug (mg) √ó 1000 / Volume (mL)</div>
                <div>Rate (mL/hr) = Dose √ó Weight √ó 60 / Conc.</div>
            </div>
            <div class="formula">
                <div class="formula-title">Drug Dose Calculation</div>
                <div>Amount = (Prescribed Dose / Available Dose) √ó Quantity</div>
            </div>
        </div>
    </div>

    <div id="references-content" style="display: none;">
        <div class="calculator-card">
            <h2>üìö References</h2>
            <ul>
                <li>Always double-check calculations before administration.</li>
                <li>Consult with a pharmacist for complex dosing.</li>
                <li>Verify calculations with a second healthcare professional.</li>
            </ul>
            <p><b>Disclaimer:</b> This calculator is for reference only. Always use clinical judgment and institutional protocols.</p>
        </div>
    </div>
    <footer>
        Medical Calculator &copy; 2025 | For Healthcare Professionals | Use with Clinical Judgment
    </footer>
</div>
<script>
function showTab(tabName) {
    document.getElementById('calculators-content').style.display = 'none';
    document.getElementById('formulas-content').style.display = 'none';
    document.getElementById('references-content').style.display = 'none';
    let tabs = document.querySelectorAll('.tab');
    tabs.forEach(tab => tab.classList.remove('active'));
    document.getElementById(tabName + '-content').style.display = 'block';
    tabs[["calculators","formulas","references"].indexOf(tabName)].classList.add('active');
}

// Fluid Calculation
function calculateFluid() {
    let weight = parseFloat(document.getElementById('weight').value);
    let age = parseFloat(document.getElementById('age').value);
    if (isNaN(weight) || isNaN(age) || weight <= 0 || age < 0) {
        alert('Please enter valid weight and age.');
        return;
    }
    let maintenanceFluid = 0, replacementFluid = 0, totalFluid = 0;
    if (age < 18) {
        // Pediatric 4-2-1 Rule
        let rate = 0;
        if (weight <= 10) {
            rate = weight * 4;
        } else if (weight <= 20) {
            rate = (10 * 4) + ((weight - 10) * 2);
        } else {
            rate = (10 * 4) + (10 * 2) + ((weight - 20) * 1);
        }
        maintenanceFluid = rate * 24;
    } else {
        maintenanceFluid = weight * 30;
    }
    totalFluid = maintenanceFluid + replacementFluid;
    document.getElementById('maintenance-fluid').textContent = maintenanceFluid.toFixed(0) + ' mL/day';
    document.getElementById('replacement-fluid').textContent = replacementFluid.toFixed(0) + ' mL/day';
    document.getElementById('total-fluid').textContent = totalFluid.toFixed(0) + ' mL/day';
    document.getElementById('fluid-result').style.display = 'block';
}

// Drip Rate Calculation
function calculateDrops() {
    let volume = parseFloat(document.getElementById('volume').value);
    let time = parseFloat(document.getElementById('time').value);
    let dropFactor = parseFloat(document.getElementById('drop-factor').value);
    if (isNaN(volume) || isNaN(time) || isNaN(dropFactor) || volume <= 0 || time <= 0 || dropFactor <= 0) {
        alert('Please enter valid numbers.');
        return;
    }
    let dropsPerMinute = (volume * dropFactor) / time;
    document.getElementById('drops-per-minute').textContent = dropsPerMinute.toFixed(1) + ' gtt/min';
    document.getElementById('drops-result').style.display = 'block';
}

// ABG Analysis
function analyzeABG() {
    let ph = parseFloat(document.getElementById('ph').value);
    let pco2 = parseFloat(document.getElementById('pco2').value);
    let hco3 = parseFloat(document.getElementById('hco3').value);
    if (isNaN(ph) || isNaN(pco2) || isNaN(hco3)) {
        alert('Please enter valid ABG values.');
        return;
    }
    let primaryDisorder = '', compensation = '', correction = '';
    if (ph < 7.35) {
        if (pco2 > 45) {
            primaryDisorder = 'Respiratory Acidosis';
            compensation = hco3 > 26 ? 'Metabolic compensation present' : 'No significant compensation';
        } else if (hco3 < 22) {
            primaryDisorder = 'Metabolic Acidosis';
            compensation = pco2 < 35 ? 'Respiratory compensation present' : 'No significant compensation';
        } else {
            primaryDisorder = 'Mixed/Other Acidosis';
            compensation = 'Check for mixed disorder';
        }
    } else if (ph > 7.45) {
        if (pco2 < 35) {
            primaryDisorder = 'Respiratory Alkalosis';
            compensation = hco3 < 22 ? 'Metabolic compensation present' : 'No significant compensation';
        } else if (hco3 > 26) {
            primaryDisorder = 'Metabolic Alkalosis';
            compensation = pco2 > 45 ? 'Respiratory compensation present' : 'No significant compensation';
        } else {
            primaryDisorder = 'Mixed/Other Alkalosis';
            compensation = 'Check for mixed disorder';
        }
    } else {
        primaryDisorder = 'Normal pH';
        compensation = '';
    }
    // Correction
    if (primaryDisorder.includes('Respiratory Acidosis')) {
        correction = 'Improve ventilation, treat underlying cause.';
    } else if (primaryDisorder.includes('Metabolic Acidosis')) {
        correction = 'Treat underlying cause, consider bicarbonate if severe.';
    } else if (primaryDisorder.includes('Respiratory Alkalosis')) {
        correction = 'Treat underlying cause, reduce hyperventilation.';
    } else if (primaryDisorder.includes('Metabolic Alkalosis')) {
        correction = 'Correct electrolyte imbalance, treat underlying cause.';
    } else {
        correction = 'Within normal limits.';
    }
    document.getElementById('primary-disorder').textContent = primaryDisorder;
    document.getElementById('compensation').textContent = compensation;
    document.getElementById('correction').textContent = correction;
    document.getElementById('abg-result').style.display = 'block';
}

// Infusion Calculation (mcg/kg/min dosing)
function calculateInfusion() {
    let dose = parseFloat(document.getElementById('inf-dose').value); // mcg/kg/min
    let weight = parseFloat(document.getElementById('pat-weight').value);
    let drugAmount = parseFloat(document.getElementById('drug-amount').value); // mg
    let bagVolume = parseFloat(document.getElementById('bag-volume').value); // mL
    if (
        isNaN(dose) || isNaN(weight) || isNaN(drugAmount) || isNaN(bagVolume) ||
        dose <= 0 || weight <= 0 || drugAmount <= 0 || bagVolume <= 0
    ) {
        alert('Please enter valid numbers for all fields.');
        return;
    }
    let conc = (drugAmount * 1000) / bagVolume; // mcg/mL
    let rate = (dose * weight * 60) / conc; // mL/hr
    document.getElementById('inf-conc').textContent = conc.toFixed(1);
    document.getElementById('inf-rate').textContent = rate.toFixed(2);
    document.getElementById('infusion-result').style.display = 'block';
}

// Drug Calculation with unit conversion
function calculateDrug() {
    let prescribedDose = parseFloat(document.getElementById('prescribed-dose').value);
    let prescribedUnit = document.getElementById('prescribed-unit').value;
    let availableDose = parseFloat(document.getElementById('available-dose').value);
    let availableUnit = document.getElementById('available-unit').value;
    let quantity = parseFloat(document.getElementById('quantity').value);
    if (
        isNaN(prescribedDose) || isNaN(availableDose) || isNaN(quantity) ||
        prescribedDose <= 0 || availableDose <= 0 || quantity <= 0
    ) {
        alert('Please enter valid numbers.');
        return;
    }
    // Normalize to mg for both
    let prescribedDoseMg = convertToMg(prescribedDose, prescribedUnit);
    let availableDoseMg = convertToMg(availableDose, availableUnit);
    let amount = (prescribedDoseMg / availableDoseMg) * quantity;
    document.getElementById('amount').textContent = amount.toFixed(2);
    document.getElementById('volume-result').textContent = amount.toFixed(2);
    document.getElementById('drug-result').style.display = 'block';
}
function convertToMg(value, unit) {
    if (unit === 'mg') return value;
    if (unit === 'g') return value * 1000;
    if (unit === 'mcg') return value / 1000;
    return value; // fallback
}
</script>
</body>
</html>
